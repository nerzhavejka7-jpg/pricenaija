!function(){"use strict";var e={n:function(a){var t=a&&a.__esModule?function(){return a.default}:function(){return a};return e.d(t,{a:t}),t},d:function(a,t){for(var l in t)e.o(t,l)&&!e.o(a,l)&&Object.defineProperty(a,l,{enumerable:!0,get:t[l]})},o:function(e,a){return Object.prototype.hasOwnProperty.call(e,a)}},a=window.wp.element,t=window.wp.i18n,l=window.wp.components,n=window.wp.apiFetch,s=e.n(n);var r=({pattern:e,type:n="filename"})=>{const[r,m]=(0,a.useState)(""),[i,o]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{const a=setTimeout(()=>{(async e=>{if(e&&""!==e.trim())try{o(!0);const a=await s()({path:"/smart-aui/v1/preview-pattern",method:"POST",data:{pattern:e}});m(a.preview)}catch(e){m((0,t.__)("Preview unavailable","smart-auto-upload-images"))}finally{o(!1)}else m("")})(e)},500);return()=>clearTimeout(a)},[e]),e&&(0,a.createElement)(l.Card,{className:"smart-aui-pattern-preview",size:"small"},(0,a.createElement)(l.CardBody,null,(0,a.createElement)("div",{className:"smart-aui-pattern-preview-content"},(0,a.createElement)("div",{className:"smart-aui-pattern-preview-label"},"filename"===n?(0,t.__)("Filename Preview:","smart-auto-upload-images"):(0,t.__)("Alt Text Preview:","smart-auto-upload-images")),(0,a.createElement)("div",{className:"smart-aui-pattern-preview-output"},i?(0,a.createElement)(l.Spinner,null):(0,a.createElement)("code",null,r||(0,t.__)("No preview available","smart-auto-upload-images"))))))};var m=({selectedTypes:e,onChange:n})=>{const s=window.smartAuiAdmin?.postTypes||[];return s&&0!==s.length?(0,a.createElement)("div",{className:"smart-aui-post-type-selector"},(0,a.createElement)("h4",null,(0,t.__)("Exclude Post Types","smart-auto-upload-images")),(0,a.createElement)("p",{className:"description"},(0,t.__)("Select post types to exclude from automatic image uploading.","smart-auto-upload-images")),(0,a.createElement)(l.__experimentalVStack,{spacing:2},s.map(t=>(0,a.createElement)(l.CheckboxControl,{key:t.value,label:t.label,checked:e.includes(t.value),onChange:a=>((a,t)=>{let l=[...e];t?l.includes(a)||l.push(a):l=l.filter(e=>e!==a),n(l)})(t.value,a)})))):(0,a.createElement)("div",{className:"smart-aui-post-type-selector"},(0,a.createElement)("h4",null,(0,t.__)("Exclude Post Types","smart-auto-upload-images")),(0,a.createElement)("p",{className:"description"},(0,t.__)("No post types available.","smart-auto-upload-images")))};var i=({domains:e,onChange:n})=>{const[s,r]=(0,a.useState)(e),[m,i]=(0,a.useState)(!1),o=e=>{r(e),n(e)};return(0,a.createElement)("div",{className:"smart-aui-domain-exclusions"},(0,a.createElement)(l.__experimentalVStack,{spacing:3},(0,a.createElement)("div",null,(0,a.createElement)("h4",null,(0,t.__)("Exclude Domains","smart-auto-upload-images")),(0,a.createElement)("p",{className:"description"},(0,t.__)("Enter domains to exclude from image uploading (one per line).","smart-auto-upload-images"))),(0,a.createElement)(l.TextareaControl,{value:s,onChange:o,placeholder:(0,t.__)("https://example.com\nhttps://cdn.example.com","smart-auto-upload-images"),rows:6,help:(0,t.__)("Enter one domain per line. You can use full URLs or just domain names.","smart-auto-upload-images")}),(0,a.createElement)(l.__experimentalHStack,{justify:"flex-start",spacing:2},(0,a.createElement)(l.Button,{variant:"secondary",size:"small",onClick:()=>i(!m)},m?(0,t.__)("Hide Help","smart-auto-upload-images"):(0,t.__)("Show Help","smart-auto-upload-images")),(0,a.createElement)(l.Button,{variant:"secondary",size:"small",onClick:()=>{const e="https://example.com",a=s.trim();o(a?`${a}\n${e}`:e)}},(0,t.__)("Add Example","smart-auto-upload-images")),s&&(0,a.createElement)(l.Button,{variant:"secondary",size:"small",onClick:()=>{confirm((0,t.__)("Are you sure you want to clear all excluded domains?","smart-auto-upload-images"))&&o("")},isDestructive:!0},(0,t.__)("Clear All","smart-auto-upload-images"))),m&&(0,a.createElement)("div",{className:"smart-aui-help-panel"},(0,a.createElement)("h5",null,(0,t.__)("Domain Exclusion Examples:","smart-auto-upload-images")),(0,a.createElement)("ul",null,(0,a.createElement)("li",null,(0,a.createElement)("code",null,"https://example.com")," -"," ",(0,t.__)("Exclude all images from example.com","smart-auto-upload-images")),(0,a.createElement)("li",null,(0,a.createElement)("code",null,"https://cdn.example.com")," -"," ",(0,t.__)("Exclude CDN images","smart-auto-upload-images")),(0,a.createElement)("li",null,(0,a.createElement)("code",null,"https://images.unsplash.com")," -"," ",(0,t.__)("Exclude Unsplash images","smart-auto-upload-images")),(0,a.createElement)("li",null,(0,a.createElement)("code",null,"https://via.placeholder.com")," -"," ",(0,t.__)("Exclude placeholder images","smart-auto-upload-images"))),(0,a.createElement)("p",{className:"description"},(0,t.__)("The plugin will automatically ignore images from these domains when processing posts.","smart-auto-upload-images")))))};var o=({settings:e,onSettingsChange:n})=>{const[s,o]=(0,a.useState)(e);(0,a.useEffect)(()=>{o(e)},[e]);const u=(e,a)=>{const t={...s,[e]:a};o(t),n(t)};return s?(0,a.createElement)(l.__experimentalVStack,{spacing:4},(0,a.createElement)(l.Panel,null,(0,a.createElement)(l.PanelBody,{title:(0,t.__)("Basic Settings","smart-auto-upload-images"),initialOpen:!0},(0,a.createElement)(l.__experimentalVStack,{spacing:4},(0,a.createElement)(l.PanelRow,null,(0,a.createElement)(l.TextControl,{label:(0,t.__)("Base URL","smart-auto-upload-images"),help:(0,t.__)("The base URL for uploaded images. Leave empty to use your site URL.","smart-auto-upload-images"),value:s.base_url||"",onChange:e=>u("base_url",e),placeholder:(0,t.__)("https://example.com","smart-auto-upload-images")})),(0,a.createElement)(l.__experimentalDivider,null),(0,a.createElement)(l.PanelRow,null,(0,a.createElement)("div",{className:"smart-aui-pattern-field"},(0,a.createElement)(l.TextControl,{label:(0,t.__)("Image Name Pattern","smart-auto-upload-images"),help:(0,t.__)("Pattern for naming uploaded images. Use placeholders like %filename%, %post_title%, %year%, etc.","smart-auto-upload-images"),value:s.image_name_pattern||"",onChange:e=>u("image_name_pattern",e),placeholder:(0,t.__)("%filename%","smart-auto-upload-images")}),(0,a.createElement)(r,{pattern:s.image_name_pattern||"",type:"filename"}))),(0,a.createElement)(l.PanelRow,null,(0,a.createElement)("div",{className:"smart-aui-pattern-field"},(0,a.createElement)(l.TextControl,{label:(0,t.__)("Alt Text Pattern","smart-auto-upload-images"),help:(0,t.__)("Pattern for image alt text. Use placeholders like %image_alt%, %post_title%, etc.","smart-auto-upload-images"),value:s.alt_text_pattern||"",onChange:e=>u("alt_text_pattern",e),placeholder:(0,t.__)("%image_alt%","smart-auto-upload-images")}),(0,a.createElement)(r,{pattern:s.alt_text_pattern||"",type:"alt"})))))),(0,a.createElement)(l.Panel,null,(0,a.createElement)(l.PanelBody,{title:(0,t.__)("Image Processing","smart-auto-upload-images"),initialOpen:!1},(0,a.createElement)(l.__experimentalVStack,{spacing:4},(0,a.createElement)(l.PanelRow,null,(0,a.createElement)(l.RangeControl,{label:(0,t.__)("Maximum Width","smart-auto-upload-images"),help:(0,t.__)("Maximum width for uploaded images in pixels. Set to 0 to disable.","smart-auto-upload-images"),value:s.max_width||0,onChange:e=>u("max_width",e),min:0,max:2e3,step:50})),(0,a.createElement)(l.PanelRow,null,(0,a.createElement)(l.RangeControl,{label:(0,t.__)("Maximum Height","smart-auto-upload-images"),help:(0,t.__)("Maximum height for uploaded images in pixels. Set to 0 to disable.","smart-auto-upload-images"),value:s.max_height||0,onChange:e=>u("max_height",e),min:0,max:2e3,step:50}))))),(0,a.createElement)(l.Panel,null,(0,a.createElement)(l.PanelBody,{title:(0,t.__)("Exclusions","smart-auto-upload-images"),initialOpen:!1},(0,a.createElement)(l.__experimentalVStack,{spacing:4},(0,a.createElement)(l.PanelRow,null,(0,a.createElement)(m,{selectedTypes:s.exclude_post_types||[],onChange:e=>u("exclude_post_types",e)})),(0,a.createElement)(l.PanelRow,null,(0,a.createElement)(i,{domains:s.exclude_domains||"",onChange:e=>u("exclude_domains",e)})))))):null};var u=()=>{const e=[{pattern:"%filename%",description:(0,t.__)("Original filename","smart-auto-upload-images")},{pattern:"%image_alt%",description:(0,t.__)("Original alt text","smart-auto-upload-images")},{pattern:"%image_title%",description:(0,t.__)("Original image title","smart-auto-upload-images")},{pattern:"%post_title%",description:(0,t.__)("Post title","smart-auto-upload-images")},{pattern:"%post_name%",description:(0,t.__)("Post slug","smart-auto-upload-images")},{pattern:"%year%",description:(0,t.__)("Current year","smart-auto-upload-images")},{pattern:"%month%",description:(0,t.__)("Current month","smart-auto-upload-images")},{pattern:"%day%",description:(0,t.__)("Current day","smart-auto-upload-images")},{pattern:"%today_date%",description:(0,t.__)("Today's date (Y-m-d)","smart-auto-upload-images")},{pattern:"%post_date%",description:(0,t.__)("Post date (Y-m-d)","smart-auto-upload-images")},{pattern:"%post_year%",description:(0,t.__)("Post year","smart-auto-upload-images")},{pattern:"%post_month%",description:(0,t.__)("Post month","smart-auto-upload-images")},{pattern:"%post_day%",description:(0,t.__)("Post day","smart-auto-upload-images")},{pattern:"%random%",description:(0,t.__)("Random string","smart-auto-upload-images")},{pattern:"%timestamp%",description:(0,t.__)("Current timestamp","smart-auto-upload-images")},{pattern:"%url%",description:(0,t.__)("Site URL","smart-auto-upload-images")}];return(0,a.createElement)(l.__experimentalVStack,{spacing:4},(0,a.createElement)(l.Card,null,(0,a.createElement)(l.CardHeader,null,(0,a.createElement)("h3",null,(0,t.__)("Pattern Variables","smart-auto-upload-images"))),(0,a.createElement)(l.CardBody,null,(0,a.createElement)("p",{className:"description"},(0,t.__)("Use these variables in your filename and alt text patterns:","smart-auto-upload-images")),(0,a.createElement)("div",{className:"smart-aui-pattern-variables"},e.map(e=>(0,a.createElement)("div",{key:e.pattern,className:"smart-aui-pattern-variable"},(0,a.createElement)("code",null,e.pattern),(0,a.createElement)("span",null,e.description)))))),(0,a.createElement)(l.Card,null,(0,a.createElement)(l.CardHeader,null,(0,a.createElement)("h3",null,(0,t.__)("Examples","smart-auto-upload-images"))),(0,a.createElement)(l.CardBody,null,(0,a.createElement)(l.__experimentalVStack,{spacing:3},(0,a.createElement)("div",null,(0,a.createElement)("h4",null,(0,t.__)("Filename Patterns","smart-auto-upload-images")),(0,a.createElement)("div",{className:"smart-aui-examples"},(0,a.createElement)("div",{className:"smart-aui-example"},(0,a.createElement)("code",null,"%post_title%-%year%-%month%-%random%"),(0,a.createElement)("small",null,(0,t.__)("my-blog-post-2025-01-img_abc123","smart-auto-upload-images"))),(0,a.createElement)("div",{className:"smart-aui-example"},(0,a.createElement)("code",null,"%year%/%month%/%filename%"),(0,a.createElement)("small",null,(0,t.__)("2025/01/original-image","smart-auto-upload-images"))))),(0,a.createElement)(l.__experimentalDivider,null),(0,a.createElement)("div",null,(0,a.createElement)("h4",null,(0,t.__)("Alt Text Patterns","smart-auto-upload-images")),(0,a.createElement)("div",{className:"smart-aui-examples"},(0,a.createElement)("div",{className:"smart-aui-example"},(0,a.createElement)("code",null,"%post_title% - %image_alt%"),(0,a.createElement)("small",null,(0,t.__)("My Blog Post - Original Alt Text","smart-auto-upload-images"))),(0,a.createElement)("div",{className:"smart-aui-example"},(0,a.createElement)("code",null,"%image_alt% | %post_title%"),(0,a.createElement)("small",null,(0,t.__)("Original Alt Text | My Blog Post","smart-auto-upload-images")))))))),(0,a.createElement)(l.Card,null,(0,a.createElement)(l.CardHeader,null,(0,a.createElement)("h3",null,(0,t.__)("Plugin Information","smart-auto-upload-images"))),(0,a.createElement)(l.CardBody,null,(0,a.createElement)(l.__experimentalVStack,{spacing:3},(0,a.createElement)("div",null,(0,a.createElement)("strong",null,(0,t.__)("Version:","smart-auto-upload-images"))," 1.2.0"),(0,a.createElement)("div",null,(0,a.createElement)("strong",null,(0,t.__)("Author:","smart-auto-upload-images"))," Burhan Nasir"),(0,a.createElement)(l.__experimentalDivider,null),(0,a.createElement)("div",null,(0,a.createElement)("h4",null,(0,t.__)("Support & Links","smart-auto-upload-images")),(0,a.createElement)(l.__experimentalVStack,{spacing:2},(0,a.createElement)(l.ExternalLink,{href:"https://wordpress.org/support/plugin/smart-auto-upload-images/"},(0,t.__)("Report Issues","smart-auto-upload-images"))))))))};var c=()=>{const[e,n]=(0,a.useState)(null),[r,m]=(0,a.useState)(!0),[i,c]=(0,a.useState)(!1),[p,d]=(0,a.useState)([]),[_,g]=(0,a.useState)(!1),E=(e,a="info")=>{const t={id:Date.now(),message:e,type:a};d(e=>[...e,t])};return(0,a.useEffect)(()=>{(async()=>{try{m(!0);const e=await s()({path:"/smart-aui/v1/settings"});n(e)}catch(e){E((0,t.__)("Failed to load settings.","smart-auto-upload-images"),"error")}finally{m(!1)}})()},[]),r?(0,a.createElement)("div",{className:"smart-aui-admin-loading"},(0,a.createElement)(l.Spinner,null),(0,a.createElement)("p",null,(0,t.__)("Loading settings...","smart-auto-upload-images"))):(0,a.createElement)("div",{className:"smart-aui-admin-wrapper"},(0,a.createElement)(l.__experimentalVStack,{spacing:4},(0,a.createElement)("div",{className:"smart-aui-admin-header"},(0,a.createElement)("h1",null,(0,t.__)("Smart Auto Upload Images Settings","smart-auto-upload-images")),(0,a.createElement)("p",{className:"description"},(0,t.__)("Configure how external images are automatically uploaded and processed.","smart-auto-upload-images"))),(0,a.createElement)("div",{className:"smart-aui-admin-content"},(0,a.createElement)("div",{className:"smart-aui-admin-main"},(0,a.createElement)(l.Card,null,(0,a.createElement)(l.CardHeader,null,(0,a.createElement)("h2",null,(0,t.__)("Plugin Settings","smart-auto-upload-images"))),(0,a.createElement)(l.CardBody,null,(0,a.createElement)(o,{settings:e,onSettingsChange:e=>{n(e),g(!0)}}))),(0,a.createElement)(l.__experimentalSpacer,{marginTop:4}),(0,a.createElement)(l.__experimentalHStack,{justify:"flex-start",spacing:2},(0,a.createElement)(l.Button,{variant:"primary",onClick:()=>(async e=>{try{c(!0);const a=await s()({path:"/smart-aui/v1/settings",method:"POST",data:e});n(a),g(!1),E((0,t.__)("Settings saved successfully!","smart-auto-upload-images"),"success")}catch(e){const a=e?.message||(0,t.__)("Failed to save settings.","smart-auto-upload-images");E(a,"error")}finally{c(!1)}})(e),isBusy:i,disabled:!_||i},(0,t.__)("Save Settings","smart-auto-upload-images")),(0,a.createElement)(l.Button,{variant:"secondary",onClick:async()=>{if(confirm((0,t.__)("Are you sure you want to reset all settings to defaults?","smart-auto-upload-images")))try{c(!0);const e=await s()({path:"/smart-aui/v1/settings/reset",method:"POST"});n(e),g(!1),E((0,t.__)("Settings reset to defaults successfully!","smart-auto-upload-images"),"success")}catch(e){E((0,t.__)("Failed to reset settings.","smart-auto-upload-images"),"error")}finally{c(!1)}},disabled:i},(0,t.__)("Reset to Defaults","smart-auto-upload-images"))),(0,a.createElement)(l.SnackbarList,{className:"smart-aui-admin-snackbar-list",notices:p.map(e=>({id:e.id,content:e.message,status:e.type})),onRemove:e=>{d(a=>a.filter(a=>a.id!==e))}})),(0,a.createElement)("div",{className:"smart-aui-admin-sidebar"},(0,a.createElement)(u,null)))))};document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("smart-aui-admin-root");if(e)if("function"===typeof a.createRoot){(0,a.createRoot)(e).render((0,a.createElement)(c,null))}else(0,a.render)((0,a.createElement)(c,null),e)})}();